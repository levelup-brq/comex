package br.com.alura.comex;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.List;
import java.util.TreeSet;

import org.junit.jupiter.api.Test;

public class PedidoTest {
	
	@Test
	public void pedidoConstrutor() {
		BigDecimal preco = new BigDecimal(350.5);
        LocalDate data = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido = new Pedido("Informatica", "Monitor", "João", preco, 1, data);
		
		assertEquals("João", pedido.getCliente());
		
	}
	@Test
	public void ProcessadorDeCSVTest() {
		
		List<Pedido> pedidos = ProcessadorDeCsv.processaArquivo("pedidos.csv");
		Pedido pedido = pedidos.get(0);
		assertEquals("ANA", pedido.getCliente());
		
	}
	
	@Test
	public void listaPedidosTest() {
		PedidoList pedidos = new PedidoList();
		BigDecimal preco = new BigDecimal(350.5);
        LocalDate data = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido = new Pedido("Informatica", "Monitor", "João", preco, 1, data);
		pedidos.add(pedido);
		
		assertEquals("João", pedidos.getPedidos().get(0).getCliente());
		
	}
	
	@Test
	public void listaDeClienteDosPedidosTest() {
		PedidoList pedidos = new PedidoList();
		
        BigDecimal preco = new BigDecimal(350.5);
        LocalDate data = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido = new Pedido("Informatica", "Monitor", "João", preco, 1, data);
		pedidos.add(pedido);
		
		BigDecimal preco2 = new BigDecimal(350.5);
        LocalDate data2 = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido2 = new Pedido("Informatica", "Monitor", "Maria", preco, 1, data);
		pedidos.add(pedido2);
		
		List<String> listaDeClienteDePedidos = pedidos.listarClienteDosPedidos();
		
		assertEquals("João", listaDeClienteDePedidos.get(0));
		assertEquals(2 , listaDeClienteDePedidos.size());
	}
	
	@Test
	public void listaDeCategoriasDosPedidosSemRepedicaoTest() {
		PedidoList pedidos = new PedidoList();
		
        LocalDate data = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido = new Pedido("Informatica", "Monitor", "João", new BigDecimal(350.5), 1, data);
		pedidos.add(pedido);
        LocalDate data2 = LocalDate.parse("01/01/2022", DateTimeFormatter.ofPattern("dd/MM/yyyy"));
		Pedido pedido2 = new Pedido("Informatica", "Monitor", "João", new BigDecimal(350.5), 1, data2);
		pedidos.add(pedido2);
		TreeSet<String> listaDeClienteDePedidos = pedidos.listarCategoriaDosPedidosSemDuplicacao();
		
		//assertEquals("João", listaDeClienteDePedidos.get(0));
		assertEquals(1 , listaDeClienteDePedidos.size());
	}
	
}
